if(!Li)var Li={};Li.setting={},Li.setting.translateSelected=!1,chrome.runtime.onConnect.addListener(function(e){e.onMessage.addListener(function(t){function n(t){var n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){if(4===n.readyState)if(n.status>=200&&n.status<300||304===n.status){var t=n.responseXML,o={},s=t.getElementsByTagName("content");if(o.word=t.getElementsByTagName("return-phrase")[0].textContent,s){o.means=[];for(var a=s.length,r=0;r<a;r++)o.means.push(s[r].textContent)}t.getElementsByTagName("phonetic-symbol")[0]&&(o.pronun=t.getElementsByTagName("phonetic-symbol")[0].textContent),e.postMessage(o)}else e.postMessage(void 0)}),n.timeout=2e3,n.ontimeout=function(){e.postMessage(void 0)},n.open("get","http://dict.youdao.com/fsearch?client=deskdict&keyfrom=chrome.extension&q="+encodeURIComponent(t)+"&pos=-1&doctype=xml&xmlVersion=3.2&dogVersion=1.0&vendor=unknown&appVer=3.1.17.4208&le=eng",!0),n.send(null)}n(navigator.onLine?t:t)})}),chrome.runtime.onMessage.addListener(function(e,t,n){return navigator.onLine?function(e){var t=new XMLHttpRequest;t.addEventListener("readystatechange",function(){if(4===t.readyState)if(t.status>=200&&t.status<300||304===t.status){var e=t.responseXML,o={},s=e.getElementsByTagName("content");if(o.word=e.getElementsByTagName("return-phrase")[0].textContent,s){o.means=[];for(var a=0,r=s.length;a<r;a++)o.means.push(s[a].textContent)}e.getElementsByTagName("phonetic-symbol")[0]&&(o.pronun=e.getElementsByTagName("phonetic-symbol")[0].textContent),n(o)}else n(void 0)}),t.timeout=2e3,t.ontimeout=function(){n(void 0)},t.open("get","http://dict.youdao.com/fsearch?client=deskdict&keyfrom=chrome.extension&q="+encodeURIComponent(e)+"&pos=-1&doctype=xml&xmlVersion=3.2&dogVersion=1.0&vendor=unknown&appVer=3.1.17.4208&le=eng",!0),t.send(null)}():function(e){chrome.storage.local.get("words",function(t){t.words?t.words.forEach(function(t){t.word!==e||n(t)}):n(void 0)})}(),!0}),chrome.commands.onCommand.addListener(function(e){"toggle-translate-selected"===e&&chrome.storage.sync.get("setting",function(e){if(void 0===e.setting)(t={}).setting={translateSelected:!0},chrome.storage.sync.set(t);else if(e.setting.translateSelected)(t={}).setting={translateSelected:!1},chrome.storage.sync.set(t);else{var t={};t.setting={translateSelected:!0},chrome.storage.sync.set(t)}})});